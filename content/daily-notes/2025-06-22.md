ğŸ¢ AWS Organizationsï¼šè®“ R&D éƒ¨é–€è„«é›¢æ¯ä¼æ¥­å»ºç«‹æ–°çµ„ç¹”çš„æ­£ç¢ºé·ç§»æ–¹å¼

ğŸ“Œ é¡Œç›®é‡é»

- å…¬å¸ç›®å‰åœ¨ AWS Organizations ä¸­æœ‰ 5 å€‹ OU

- R&D å–®ä½å³å°‡ç¨ç«‹ï¼Œéœ€æ“æœ‰è‡ªå·±çš„æ–° AWS Organization

- å·²ç‚º R&D å»ºç«‹æ–°çš„ ç®¡ç†å¸³è™Ÿï¼ˆmanagement accountï¼‰

âœ… æ­£ç¢ºç­”æ¡ˆ

B. Invite the R&D AWS account to be part of the new organization after the R&D AWS account has left the prior organization

ğŸ” é¸é …è§£æ

ğŸ§­ æ­£ç¢ºæµç¨‹è£œå……èªªæ˜

è¦è®“æŸå€‹ AWS å¸³è™Ÿå¾ A çµ„ç¹”é·ç§»åˆ° B çµ„ç¹”ï¼Œæ‡‰éµå¾ªä»¥ä¸‹æ­¥é©Ÿï¼š

å¾åŸçµ„ç¹”ç§»é™¤å¸³è™Ÿ

å¾æ–°çµ„ç¹”çš„ç®¡ç†å¸³è™Ÿç™¼å‡ºé‚€è«‹

åœ¨ R&D å¸³è™Ÿä¸­æ¥å—é‚€è«‹

âœ… çµè«–

é¸é … B ç¬¦åˆ AWS Organizations çš„è¨­è¨ˆèˆ‡é™åˆ¶ï¼Œä¸”æ˜¯æœ€ç°¡å–®ã€åˆæ³•ä¸”ä½é¢¨éšªçš„é·ç§»æ–¹å¼ã€‚

ğŸ§± [CloudFormation & IAM] EC2 å®‰å…¨å­˜å– DynamoDB çš„æœ€ä½³æ–¹å¼

ğŸ“Œ é¡Œç›®èƒŒæ™¯

- ä½¿ç”¨ CloudFormation å»ºç«‹ä¸‰å±¤å¼æ‡‰ç”¨ï¼ˆWeb Tier / App Tier / DynamoDBï¼‰

- Web/App Tier éƒ¨ç½²åœ¨ EC2 ä¸Š

- DynamoDB å±¤ä¸å¯å…¬é–‹å­˜å–

- è¦è®“ EC2 è®€å¯« DynamoDBï¼Œä½† ä¸èƒ½æš´éœ² API é‡‘é‘°

âœ… æ­£ç¢ºç­”æ¡ˆï¼š

B. Create an IAM role that has the required permissions to read and write from the DynamoDB tables. Add the role to the EC2 instance profile, and associate the instance profile with the application instances

ğŸ§  è©³ç´°è§£æ

ğŸ çµè«–

é¸é … B ç¬¦åˆæœ€ä½³å¯¦è¸ï¼šEC2 ä½¿ç”¨ IAM Role æ­é… Instance Profile ä¾†å®‰å…¨å­˜å– DynamoDBï¼Œä¸éœ€ç®¡ç†é‡‘é‘°ï¼Œä¹Ÿé¿å…è³‡è¨Šå¤–æ´©é¢¨éšªã€‚

ğŸ“¦ [S3 Access Control] å¤šå€‹ Vendor å­˜å– S3 Bucket éœ€æœ€å°æ¬Šé™è¨­è¨ˆ

ğŸ“Œ é¡Œç›®éœ€æ±‚

- æœ‰å¤šå€‹ vendor AWS å¸³è™Ÿè¦ä¸‹è¼‰å…¬å¸å­˜åœ¨ S3 çš„ç‰©ä»¶

- å…¬å¸å¸Œæœ›é€™äº›å¸³è™Ÿæ“æœ‰æœ€å°å¿…è¦æ¬Šé™ï¼ˆminimum accessï¼‰

- è¦æœ‰æœ€ä½æ“ä½œè² æ“”ï¼ˆleast operational overheadï¼‰

âœ… æ­£ç¢ºç­”æ¡ˆï¼š

C. Create a cross-account IAM role that has a read-only access policy specified for the IAM role

ğŸ§  è©³ç´°è§£æ

ğŸ›  Cross-Account IAM Role æ¶æ§‹

Vendor AWS Account

â†“ assume role

Company AWS Account (S3 bucket æ‰€åœ¨)

â†³ IAM Role (with S3 read-only policy)

â†³ S3 Bucket (with trust policy allowing assumeRole)

â˜‘ æ­¥é©Ÿæ¦‚è¦ï¼š

å…¬å¸ç«¯å»ºç«‹ IAM Role

Vendor ä½¿ç”¨ STS AssumeRole å­˜å–è³‡æº

ğŸ çµè«–

é¸é … C æ˜¯æœ€ä½³å¯¦å‹™åšæ³•ï¼Œç¬¦åˆä»¥ä¸‹æ¢ä»¶ï¼š

- å®‰å…¨æ€§é«˜ï¼šåªå…è¨±æŒ‡å®š vendor assume role

- æœ€å°æ¬Šé™ï¼šåªçµ¦ GetObject

- æ“ä½œè² æ“”ä½ï¼šé›†ä¸­ç®¡ç†è§’è‰²èˆ‡æ”¿ç­–å³å¯

â˜ï¸ [EC2 DR Strategy] åœ¨ Failover å€åŸŸä¸­ç¢ºä¿ EC2 å®¹é‡çš„ç½é›£å¾©åŸç­–ç•¥

ğŸ“Œ é¡Œç›®éœ€æ±‚

- è¨­è¨ˆ Disaster Recoveryï¼ˆDRï¼‰ç­–ç•¥

- è¦åœ¨ Failover AWS Region ä¸­ç¢ºä¿æœ‰è¶³å¤ çš„ EC2 å®¹é‡

- å¿…é ˆä¿è­‰å®¹é‡ï¼ˆmust meet capacityï¼‰

âœ… æ­£ç¢ºç­”æ¡ˆï¼š

D. Purchase a Capacity Reservation in the failover Region

ğŸ§  è©³ç´°è§£æ

ğŸ§¾ Capacity Reservation æ˜¯ä»€éº¼ï¼Ÿ

- é å…ˆä¿ç•™ EC2 å¯¦é«”å®¹é‡

- å¯èˆ‡ On-Demand / RI / Savings Plan ä¸¦ç”¨

- é¿å… failover æ™‚é«˜å³°æœŸå•Ÿå‹•å¤±æ•—

ğŸ” é—œéµç‰¹æ€§ï¼š

- ä¿ç•™æŒ‡å®š AZã€instance type çš„ å¯¦é«”è³‡æº

- ç¢ºä¿éœ€è¦æ™‚å¯ä»¥ç«‹å³å•Ÿå‹• EC2 å¯¦ä¾‹

- é©åˆç”¨æ–¼ç½é›£å¾©åŸã€HPC ç­‰å ´æ™¯

ğŸ çµè«–

è‹¥ä¼æ¥­è¦æ±‚ failover region ä¸€å®šè¦æœ‰å¯ç”¨çš„ EC2 è³‡æºï¼Œå‰‡ï¼š

- åªæœ‰ Capacity Reservation èƒ½ä¿è­‰å®¹é‡å¯ç”¨

- æ˜¯è¨­è¨ˆç½é›£å¾©åŸç­–ç•¥çš„ å”¯ä¸€æ­£ç¢ºé¸æ“‡

âœ… é¸é … D æ˜¯æ­£ç¢ºç­”æ¡ˆã€‚

â˜ï¸ [S3 Global Secure Sharing] å…¬å¸å…¨çƒå“¡å·¥è³‡æ–™æ”¶é›†èˆ‡åˆ†äº«çš„å®‰å…¨è§£æ³•

ğŸ“Œ é¡Œç›®éœ€æ±‚

- å…¬å¸éœ€å°‡ç ”ç©¶è³‡æ–™æ”¶é›†ä¸¦å­˜è‡³ Amazon S3

- å…¨çƒå“¡å·¥å¯å®‰å…¨å­˜å–è³‡æ–™

- è§£æ³•å¿…é ˆæ˜¯å®‰å…¨ã€ä½æ“ä½œè² æ“”ï¼ˆminimal operational overheadï¼‰

âœ… æ­£ç¢ºç­”æ¡ˆï¼š

A. Use an AWS Lambda function to create an S3 presigned URL. Instruct employees to use the URL

ğŸ§  è©³ç´°è§£æ

ğŸ§¾ ç‚ºä½•é¸ Aï¼Ÿ

ğŸ” S3 Presigned URL å„ªé»ï¼š

- æ™‚æ•ˆæ€§ï¼šå¯è¨­å®šéæœŸæ™‚é–“

- æœ€å°æ¬Šé™ï¼šåƒ…é™ç‰¹å®šç‰©ä»¶ã€æ“ä½œï¼ˆå¦‚ä¸Šå‚³ã€ä¸‹è¼‰ï¼‰

- ä½ç¶­é‹ï¼šç„¡éœ€å»º IAM å¸³è™Ÿèˆ‡å¯†ç¢¼

- é©åˆå…¨çƒç”¨æˆ¶ï¼šé€é HTTPS å­˜å–å³å¯ï¼Œä¸å—å¹³å°é™åˆ¶

âš™ï¸ Lambda å¯¦ä½œæ–¹å¼ï¼š

- ä½¿ç”¨ IAM è§’è‰²çµ¦ Lambda å­˜å– S3 æ¬Šé™

- ä¾éœ€æ±‚ç”¢ç”Ÿ getObject æˆ– putObject çš„é ç°½ç¶²å€

- é€éå‰ç«¯ç³»çµ±æˆ– API å‚³é€ URL çµ¦ç”¨æˆ¶

ğŸ çµè«–

è‹¥å…¬å¸æƒ³ç”¨æœ€ä½ç¶­é‹æˆæœ¬ã€é«˜å®‰å…¨æ€§æ–¹å¼å°‡ S3 è³‡æ–™åˆ†äº«çµ¦å…¨çƒå“¡å·¥ï¼š

- S3 Presigned URL + Lambda è‡ªå‹•ç”¢ç”Ÿ æ˜¯æœ€ä½³é¸æ“‡

âœ… é¸é … A ç‚ºæ­£ç¢ºç­”æ¡ˆã€‚