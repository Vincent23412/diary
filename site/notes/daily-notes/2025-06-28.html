<!doctype html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>2025-06-28</title>
  <link rel="stylesheet" href="/notes/style.css" />
</head>
<body>
  <header class="container py-24">
    <h1 class="title">2025-06-28</h1>
    <nav class="nav">
      <a href="/notes/daily-notes/index.html" class="nav-link">â† å›åˆ†é¡</a>
      <a href="/notes/index.html" class="nav-link">å›ç¸½è¦½</a>
    </nav>
  </header>

  <main class="container card">
    <article class="post-content">
      <p>âœ… æ­£ç¢ºç­”æ¡ˆï¼šB. Use AWS Backup to create backup schedules and retention policies for the table.</p>
<p>âœ… é¡Œç›®è§£æï¼š</p>
<p>ç›®æ¨™ï¼š</p>
<ul>
<li>
<p>ä¿ç•™ ä½¿ç”¨è€…äº¤æ˜“è³‡æ–™ï¼ˆtransaction dataï¼‰ åœ¨ DynamoDB ä¸­</p>
</li>
<li>
<p>ä¿å­˜æœŸé™ç‚º 7 å¹´</p>
</li>
<li>
<p>è¿½æ±‚æœ€ä½ç‡Ÿé‹è² æ“”ï¼ˆMost operationally efficientï¼‰</p>
</li>
</ul>
<p>ğŸ§  å„é¸é …åˆ†æï¼š</p>
<p>A. ä½¿ç”¨ DynamoDB çš„ Point-in-time recovery (PITR)</p>
<ul>
<li>
<p>PITR å¯ä»¥è®“ä½ å¾©åŸåˆ°æœ€è¿‘ 35 å¤©çš„ä»»æ„æ™‚é–“é»</p>
</li>
<li>
<p>âœ… é©åˆçŸ­æœŸå¾©åŸç”¨</p>
</li>
<li>
<p>âŒ ç„¡æ³•æ»¿è¶³ 7 å¹´ä¿å­˜éœ€æ±‚</p>
</li>
</ul>
<p>âœ… B. ä½¿ç”¨ AWS Backup è¨­å®šå‚™ä»½æ’ç¨‹èˆ‡ä¿ç•™åŸå‰‡</p>
<ul>
<li>
<p>æ”¯æ´ DynamoDB table çš„å®šæœŸå‚™ä»½èˆ‡è‡ªè¨‚ä¿ç•™æœŸ</p>
</li>
<li>
<p>å¯ä»¥è¨­å®šæ¯å¤©/æ¯é€±/æ¯æœˆå‚™ä»½ä¸¦è‡ªå‹•ä¿å­˜ 7 å¹´ âœ…</p>
</li>
<li>
<p>å®Œå…¨ ç„¡éœ€è‡ªè¨‚ Lambda æˆ– EventBridge âœ…</p>
</li>
<li>
<p>æœ€ç¬¦åˆ operationally efficient çš„æ¢ä»¶</p>
</li>
</ul>
<p>C. ä½¿ç”¨ DynamoDB Console æ‰‹å‹•å‚™ä»½ + S3 å„²å­˜</p>
<ul>
<li>
<p>éœ€è¦æ‰‹å‹•æ“ä½œï¼Œç„¡æ³• scale</p>
</li>
<li>
<p>é›–ç„¶æ­é… S3 Lifecycle å¯é” 7 å¹´ä¿ç•™</p>
</li>
<li>
<p>âŒ ä¸æ˜¯ã€Œè‡ªå‹•åŒ–ã€æˆ–ã€Œé«˜æ•ˆç‡ã€çš„ç‡Ÿé‹æ–¹å¼</p>
</li>
</ul>
<p>D. ä½¿ç”¨ EventBridge + Lambda è‡ªå‹•å‚™ä»½åˆ° S3</p>
<ul>
<li>
<p>å¯ä»¥é”æˆéœ€æ±‚ï¼Œä½†è¦ä½ è‡ªå·±ç¶­è­·ï¼š</p>
</li>
<li>
<p>é›–ç„¶æœ‰æ•ˆï¼Œä½†æ¯”èµ· AWS Backup ä»å¤šå‡ºä¸å°‘ç¶­é‹è² æ“” âŒ</p>
</li>
</ul>
<p>âœ… ç¸½çµæ¯”è¼ƒï¼š</p>
<p>âœ… æ­£è§£ï¼š</p>
<p>B. Use AWS Backup to create backup schedules and retention policies for the table.</p>
<p>âœ… æ­£ç¢ºç­”æ¡ˆï¼šB. Modify the launchPermission property of the AMI. Share the AMI with the MSP Partnerâ€™s AWS account only. Modify the CMKâ€™s key policy to allow the MSP Partnerâ€™s AWS account to use the key.</p>
<p>ğŸ§  é¡Œç›®è§£æï¼š</p>
<p>é€™é¡Œçš„é‡é»åœ¨æ–¼ï¼š</p>
<p>AMI æ˜¯åŠ å¯†çš„ï¼Œè€Œä¸”ï¼š</p>
<p>ä½¿ç”¨çš„æ˜¯ è‡ªå®šç¾©çš„ KMS CMKï¼ˆCustomer Master Keyï¼‰</p>
<p>éœ€è¦èˆ‡ MSP Partner çš„ AWS å¸³æˆ¶å…±äº«</p>
<p>å¼·èª¿è¦ æœ€å®‰å…¨çš„æ–¹å¼</p>
<p>âœ… ç‚ºä»€éº¼é¸ Bï¼Ÿ</p>
<ul>
<li>
<p>launchPermission å¯ç”¨ä¾†æŒ‡å®šå“ªäº›å¸³è™Ÿå¯ä½¿ç”¨ AMI å•Ÿå‹• EC2ã€‚</p>
</li>
<li>
<p>ä½†å› ç‚ºè©² AMI èƒŒå¾Œçš„ EBS Snapshot æ˜¯ ä½¿ç”¨ CMK åŠ å¯†çš„ï¼š</p>
</li>
<li></li>
<li>
<p>é€™æ˜¯ AWS å®˜æ–¹å»ºè­°çš„åšæ³•ï¼Œå®‰å…¨åˆç›´æ¥ã€‚</p>
</li>
</ul>
<p>âŒ å…¶ä»–é¸é …ç‚ºä½•éŒ¯ï¼Ÿ</p>
<p>A.</p>
<p>å…¬é–‹ AMI å’Œ snapshotï¼Ÿ</p>
<ul>
<li>
<p>âŒ é¢¨éšªæ¥µé«˜ï¼ä¸è©²å°‡åŠ å¯†è³‡æºå…¬é–‹ï¼Œå³ä½¿æœ‰é‡‘é‘°ä¿è­·ã€‚</p>
</li>
<li>
<p>ä¸ç¬¦åˆã€Œæœ€å®‰å…¨æ–¹å¼ã€é€™å€‹é¡Œç›®é‡é»ã€‚</p>
</li>
</ul>
<p>C.</p>
<p>ä¿¡ä»»å°æ–¹çš„ KMS é‡‘é‘°ï¼Ÿ</p>
<ul>
<li>
<p>âŒ KMS é‡‘é‘°ä¸æ”¯æ´ã€Œä¿¡ä»»å¦ä¸€å€‹é‡‘é‘°ã€çš„è¨­å®šã€‚</p>
</li>
<li>
<p>ä½ ä¸èƒ½ç”¨ CMK ç›´æ¥ä¿¡ä»»å¦ä¸€å€‹å¸³è™Ÿçš„é‡‘é‘°ä¾†é‡åŠ å¯†å·²å­˜åœ¨çš„ snapshotã€‚</p>
</li>
<li>
<p>è€Œä¸”è¤‡é›œã€æ˜“éŒ¯ï¼Œä¸æ˜¯æœ€ç›´æ¥æˆ–å®‰å…¨çš„é¸é …ã€‚</p>
</li>
</ul>
<p>D.</p>
<p>é€é S3 åŒ¯å‡ºå†é‡å»ºï¼Ÿ</p>
<ul>
<li>
<p>é€™æ˜¯å¯è¡Œçš„æŠ€è¡“æ–¹å¼ï¼Œä½†ï¼š</p>
</li>
<li></li>
<li>
<p>é¡Œç›®èªªæ˜ï¼šã€Œæœ€å®‰å…¨ï¼Œæœ€ä½é¢¨éšªæ–¹å¼ã€â†’ âŒ ä¸ç¬¦åˆã€‚</p>
</li>
</ul>
<p>âœ… æ­£è§£æ–¹å¼èªªæ˜ï¼š</p>
<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¨­å®šå…±äº« AMIï¼š</p>
<p>aws ec2 modify-image-attribute \</p>
<p>--image-id ami-xxxxxxxx \</p>
<p>--launch-permission "Add=[{UserId=MSP_ACCOUNT_ID}]"</p>
<p>ç„¶å¾Œæ›´æ–°åŠ å¯† snapshot æ‰€ä½¿ç”¨çš„ KMS CMK é‡‘é‘°ç­–ç•¥ï¼ŒåŠ å…¥ MSP å¸³è™Ÿï¼š</p>
<p>{</p>
<p>"Sid": "Allow use of the key",</p>
<p>"Effect": "Allow",</p>
<p>"Principal": { "AWS": "arn:aws:iam::MSP_ACCOUNT_ID:root" },</p>
<p>"Action": [</p>
<p>"kms:Decrypt",</p>
<p>"kms:DescribeKey",</p>
<p>"kms:ReEncrypt*",</p>
<p>"kms:GenerateDataKey*"</p>
<p>],</p>
<p>"Resource": "*"</p>
<p>}</p>
<p>âœ… ç¸½çµ</p>
<p>âœ… æ­£è§£ï¼š</p>
<p>B. Modify the launchPermission property of the AMI. Share the AMI with the MSP Partnerâ€™s AWS account only. Modify the CMKâ€™s key policy to allow the MSP Partnerâ€™s AWS account to use the key.</p>
<p>âœ… æ­£ç¢ºç­”æ¡ˆï¼šD. Create an Amazon EventBridge (Amazon CloudWatch Events) rule to detect any certificates that will expire within 30 days. Configure the rule to invoke an AWS Lambda function. Configure the Lambda function to send a custom alert by way of Amazon Simple Notification Service (Amazon SNS).</p>
<p>ğŸ” é¡Œç›®è§£æï¼š</p>
<p>ç›®æ¨™ï¼š</p>
<p>åœ¨ SSL/TLS æ†‘è­‰éæœŸå‰ 30 å¤©ç™¼å‡ºé€šçŸ¥ã€‚</p>
<p>æƒ…å¢ƒï¼š</p>
<ul>
<li>
<p>æ†‘è­‰æ˜¯å¾ ACM (AWS Certificate Manager) åŒ¯å…¥çš„ã€‚</p>
</li>
<li>
<p>ç”¨æ–¼ Elastic Load Balancersã€‚</p>
</li>
<li>
<p>éœ€è¦ è‡ªå‹•é€šçŸ¥ï¼ˆ30å¤©å‰ï¼‰ â†’ ç¬¦åˆ event-driven alerting æ¦‚å¿µã€‚</p>
</li>
</ul>
<p>âœ… ç‚ºä»€éº¼é¸ Dï¼Ÿ</p>
<p>AWS Certificate Manager æœ¬èº«ç„¡æ³•è‡ªå‹•é€šçŸ¥æ†‘è­‰å³å°‡éæœŸï¼Œä½†å®ƒæœƒå°‡é€™äº›è³‡è¨Šç™¼ä½ˆåˆ° Amazon EventBridgeï¼ˆä»¥å‰å« CloudWatch Eventsï¼‰ã€‚</p>
<p>ä½ å¯ä»¥ï¼š</p>
<p>å»ºç«‹ä¸€å€‹ EventBridge è¦å‰‡ä¾†ç¯©é¸å‡º ACM æ†‘è­‰éæœŸçš„äº‹ä»¶ï¼ˆACM Certificate Approaching Expirationï¼‰ã€‚</p>
<p>è§¸ç™¼ AWS Lambdaã€‚</p>
<p>Lambda ç™¼é€é€šçŸ¥åˆ° SNS topicã€‚</p>
<p>é€™æ¨£å¯ä»¥æ»¿è¶³ï¼š</p>
<ul>
<li>
<p>â° 30å¤©å‰é€šçŸ¥</p>
</li>
<li>
<p>ğŸ“© è‡ªå‹•é€šçŸ¥ via SNS</p>
</li>
<li>
<p>ğŸ” ç„¡éœ€æ‰‹å‹•ç›£æ§</p>
</li>
</ul>
<p>âŒ éŒ¯èª¤é¸é …è§£æï¼š</p>
<p>A. âŒã€ŒAdd a rule in ACMã€</p>
<p>ACM ä¸æ”¯æ´è‡ªè¨‚è¦å‰‡æˆ–æ’ç¨‹é€šçŸ¥ï¼Œä¹Ÿä¸èƒ½ç›´æ¥ publish SNS é€šçŸ¥ã€‚</p>
    </article>
    <p class="post-meta">
      åŸæ–‡ï¼š
      <a href="https://github.com/Vincent23412/diary/blob/main/content/daily-notes/2025-06-28.md" target="_blank">GitHub</a> Â·
      <a href="https://raw.githubusercontent.com/Vincent23412/diary/main/content/daily-notes/2025-06-28.md" target="_blank">raw</a>
    </p>
  </main>

  <footer class="container py-24">
    <small>æœ€å¾Œæ›´æ–°ï¼š2025-12-18</small>
  </footer>
</body>
</html>
