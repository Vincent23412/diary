<!doctype html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>2025-06-17</title>
  <link rel="stylesheet" href="/notes/style.css" />
</head>
<body>
  <header class="container py-24">
    <h1 class="title">2025-06-17</h1>
    <nav class="nav">
      <a href="/notes/daily-notes/index.html" class="nav-link">â† å›åˆ†é¡</a>
      <a href="/notes/index.html" class="nav-link">å›ç¸½è¦½</a>
    </nav>
  </header>

  <main class="container card">
    <article class="post-content">
      <hr />
<h2 id="_1">ğŸ“¦ å¥—ä»¶å®‰è£</h2>
<p>```bash
npm install @web3-storage/w3up-client @web3-storage/file</p>
<h2 id="_2">ğŸ“ å°ˆæ¡ˆçµæ§‹å»ºè­°</h2>
<p>project-root/
â”œâ”€â”€ .w3up/                      # å„²å­˜ Agent èº«ä»½èˆ‡ delegation æ†‘è­‰
â”œâ”€â”€ example.txt                # è¦ä¸Šå‚³çš„æ¸¬è©¦æª”
â””â”€â”€ upload.ts                  # ä¸»ç¨‹å¼å…¥å£</p>
<h2 id="_3">âœ¨ å®Œæ•´ç¯„ä¾‹ï¼šå¾ç™»å…¥åˆ°ä¸Šå‚³</h2>
<p>import { create } from '@web3-storage/w3up-client'
import { File } from '@web3-storage/file'
import fs from 'fs'</p>
<p>async function main() {
  const client = await create()</p>
<p>// 1. ä½¿ç”¨ Email ç™»å…¥ï¼ˆåªéœ€åŸ·è¡Œä¸€æ¬¡ï¼‰
  const email = 'you@example.com'
  console.log(<code>ğŸ“¨ Sending login link to ${email}...</code>)
  const account = await client.login(email)</p>
<p>// 2. ç­‰å¾…é©—è­‰èˆ‡é¸æ“‡æ–¹æ¡ˆ
  console.log('â³ Waiting for login confirmation...')
  await account.plan.wait()
  console.log('âœ… Email verified and plan active!')</p>
<p>// 3. å»ºç«‹ Space
  const space = await client.createSpace('my-space', { account })
  await client.setCurrentSpace(space.did())
  console.log('ğŸª Space created:', space.did())</p>
<p>// 4. ä¸Šå‚³æœ¬åœ°æª”æ¡ˆ
  const buffer = fs.readFileSync('example.txt')
  const file = new File([buffer], 'example.txt')
  const result = await client.uploadFile(file)</p>
<p>console.log('ğŸ“¦ Uploaded CID:', result.cid.toString())
  console.log(<code>ğŸ”— View on IPFS: https://${result.cid}.ipfs.w3s.link</code>)
}</p>
<p>main().catch(console.error)</p>
<h2 id="login">ğŸ“Œ login æµç¨‹èªªæ˜</h2>
<h2 id="_4">ğŸ” æª¢æŸ¥æ˜¯å¦å·²ç™»å…¥</h2>
<p>å¯ç”¨ client.hasAccount() åˆ¤æ–·æ˜¯å¦éœ€è¦å†æ¬¡ç™»å…¥ï¼š</p>
<p>if (!(await client.hasAccount())) {
  const account = await client.login('you@example.com')
  await account.plan.wait()
}</p>
<h2 id="space">ğŸ—‚ å¤šæ¬¡ä½¿ç”¨ Space</h2>
<p>await client.setCurrentSpace('<space-did>')</p>
<p>ä½ å¯ä»¥åœ¨å¤šå€‹ Space é–“åˆ‡æ›ï¼Œåªè¦ä¹‹å‰æœ‰å»ºç«‹éæˆ– addSpace() é€²ä¾†çš„ delegationã€‚</p>
<h2 id="api">ğŸ“‚ ä¸Šå‚³ç›¸é—œ API</h2>
<h2 id="_5">ğŸ”— é è¦½ç¶²å€æ ¼å¼</h2>
<p>https://${cid}.ipfs.w3s.link</p>
<h2 id="_6">ğŸ§  è£œå……èªªæ˜</h2>
<ul>
<li>
<p>ç™»å…¥èˆ‡ Space å»ºç«‹åªéœ€åŸ·è¡Œä¸€æ¬¡ï¼Œé™¤éï¼š</p>
</li>
<li>
<p>è‹¥éƒ¨ç½²åœ¨ Lambda/Dockerï¼Œè«‹ä½¿ç”¨ delegation æ¨¡å¼ï¼ˆBYODï¼‰</p>
</li>
</ul>
    </article>
    <p class="post-meta">
      åŸæ–‡ï¼š
      <a href="https://github.com/Vincent23412/diary/blob/main/content/daily-notes/2025-06-17.md" target="_blank">GitHub</a> Â·
      <a href="https://raw.githubusercontent.com/Vincent23412/diary/main/content/daily-notes/2025-06-17.md" target="_blank">raw</a>
    </p>
  </main>

  <footer class="container py-24">
    <small>æœ€å¾Œæ›´æ–°ï¼š2025-12-19</small>
  </footer>
</body>
</html>
