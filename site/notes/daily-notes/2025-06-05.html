<!doctype html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>2025-06-05</title>
  <link rel="stylesheet" href="/notes/style.css" />
</head>
<body>
  <header class="container py-24">
    <h1 class="title">2025-06-05</h1>
    <nav class="nav">
      <a href="/notes/daily-notes/index.html" class="nav-link">â† å›åˆ†é¡</a>
      <a href="/notes/index.html" class="nav-link">å›ç¸½è¦½</a>
    </nav>
  </header>

  <main class="container card">
    <article class="post-content">
      <h1 id="typescript">ğŸ› ï¸ TypeScript é–‹ç™¼éç¨‹å•é¡Œæ•´ç†ç­†è¨˜</h1>
<h2 id="1-err_unknown_file_extension-ts">1. âŒ ERR_UNKNOWN_FILE_EXTENSION: ".ts"</h2>
<h3 id="_1">å•é¡Œæè¿°</h3>
<p>ä½¿ç”¨ Node.js åŸ·è¡Œ .ts æª”æ¡ˆæœƒå‡ºç¾éŒ¯èª¤ï¼š</p>
<p>TypeError [ERR_UNKNOWN_FILE_EXTENSION]: Unknown file extension ".ts"</p>
<h3 id="_2">åŸå› </h3>
<p>Node.js ä¸æ”¯æ´ç›´æ¥åŸ·è¡Œ TypeScript (.ts) æª”æ¡ˆã€‚</p>
<h3 id="_3">è§£æ³•</h3>
<h3 id="ts-node">âœ… æ–¹æ³•ä¸€ï¼šä½¿ç”¨ ts-node</h3>
<p>yarn add -D ts-node typescript
npx ts-node src/index.ts</p>
<h3 id="tsx">âœ… æ–¹æ³•äºŒï¼šä½¿ç”¨ tsxï¼ˆæ¨è–¦ï¼‰</h3>
<p>yarn add -D tsx typescript
npx tsx src/index.ts</p>
<h3 id="_4">âœ… æ–¹æ³•ä¸‰ï¼šå…ˆç·¨è­¯å†åŸ·è¡Œ</h3>
<p>npx tsc     # ç·¨è­¯ ts -&gt; js
node dist/index.js</p>
<h2 id="2-yarn">2. âŒ éŒ¯èª¤çš„ yarn å®‰è£æŒ‡ä»¤</h2>
<h3 id="_5">éŒ¯èª¤æŒ‡ä»¤</h3>
<p>yarn -i --save-dev @types/express</p>
<h3 id="_6">æ­£ç¢ºç”¨æ³•</h3>
<p>yarn add -D @types/express</p>
<h2 id="3-tsx">3. â“ æ˜¯å¦å¯ä»¥ä½¿ç”¨ .tsx ä½œç‚ºåŸ·è¡Œå·¥å…·ï¼Ÿ</h2>
<h3 id="_7">å›ç­”</h3>
<p>âœ… æ˜¯çš„ï¼Œé€™è£¡çš„ tsx æ˜¯æŒ‡ä¸€å€‹å¿«é€ŸåŸ·è¡Œ TypeScript çš„å·¥å…·ï¼ˆesbuild-kit/tsxï¼‰ï¼Œå®ƒæ”¯æ´ .ts å’Œ .tsx åŸ·è¡Œï¼Œä¸”æ•ˆèƒ½æ¯” ts-node æ›´å¥½ã€‚</p>
<h3 id="_8">å®‰è£èˆ‡ä½¿ç”¨</h3>
<p>yarn add -D tsx
npx tsx src/index.ts</p>
<h2 id="4-nodemon-typescript">4. âœ… ä½¿ç”¨ nodemon æ­é… TypeScript</h2>
<h3 id="_9">å®‰è£æ–¹å¼</h3>
<p>yarn add -D nodemon tsx typescript</p>
<h3 id="nodemonjson">å»ºç«‹ nodemon.json</h3>
<p>{
  "watch": ["src"],
  "ext": "ts",
  "exec": "tsx src/index.ts"
}</p>
<h3 id="packagejson-script">package.json script</h3>
<p>"scripts": {
  "dev": "nodemon"
}</p>
<h3 id="_10">åŸ·è¡Œæ–¹å¼</h3>
<p>yarn dev</p>
<h1 id="typescript-types">ğŸ§  TypeScript å¥—ä»¶å‹åˆ¥ç­†è¨˜ï¼ˆ@typesï¼‰</h1>
<h2 id="_11">âœ… ç‚ºä»€éº¼éœ€è¦å‹åˆ¥å®šç¾©ï¼Ÿ</h2>
<ul>
<li>
<p>TypeScript æ˜¯éœæ…‹å‹åˆ¥èªè¨€ï¼Œéœ€è¦çŸ¥é“æ¯å€‹å‡½å¼èˆ‡ç‰©ä»¶çš„ã€Œå‹åˆ¥ã€æ‰èƒ½æ­£ç¢ºç·¨è­¯ã€‚</p>
</li>
<li>
<p>æœ‰äº› JavaScript å¥—ä»¶ï¼ˆå¦‚ expressã€wsï¼‰æ²’æœ‰å…§å»ºå‹åˆ¥è³‡è¨Šï¼Œæ‰€ä»¥ TypeScript éœ€è¦é¡å¤–çš„å‹åˆ¥å®šç¾©æª”æ¡ˆä¾†ç†è§£å®ƒå€‘ã€‚</p>
</li>
</ul>
<h2 id="typesxxx">ğŸ” å¦‚ä½•åˆ¤æ–·ä¸€å€‹å¥—ä»¶æ˜¯å¦éœ€è¦å®‰è£ @types/xxxï¼Ÿ</h2>
<h3 id="_12">âœ… ä¸éœ€è¦å®‰è£ï¼ˆå…§å»ºå‹åˆ¥ï¼‰</h3>
<p>é€™äº›å¥—ä»¶æœ¬èº«å°±æ”¯æ´ TypeScriptï¼Œå®‰è£ä¸»å¥—ä»¶å³å¯ã€‚</p>
<ul>
<li>åˆ¤æ–·æ–¹æ³•ï¼š</li>
</ul>
<h3 id="_13">ç¯„ä¾‹ï¼š</h3>
<p>yarn add axios         # âœ… ä¸éœ€è¦ @types/axios
yarn add dayjs         # âœ… ä¸éœ€è¦ @types/dayjs</p>
<h3 id="typesxxx_1">âŒ éœ€è¦å®‰è£ @types/xxx</h3>
<p>é€™äº›æ˜¯ JavaScript å¥—ä»¶ï¼Œæ²’æœ‰å‹åˆ¥æè¿°ï¼Œè¦é€éç¤¾ç¾¤æä¾›çš„ DefinitelyTyped å®‰è£å‹åˆ¥ã€‚</p>
<ul>
<li>å®‰è£æ–¹å¼ï¼š</li>
</ul>
<p>yarn add lodash
yarn add -D @types/lodash</p>
<ul>
<li>D ä»£è¡¨é–‹ç™¼éšæ®µä½¿ç”¨ï¼ˆdevDependenciesï¼‰</li>
</ul>
<h3 id="_14">å¸¸è¦‹ç¯„ä¾‹ï¼š</h3>
<h2 id="_15">ğŸ›  å¿«é€Ÿåˆ¤æ–·æ–¹å¼</h2>
<h3 id="yarn">æ–¹æ³•ä¸€ï¼šç”¨ yarn æŸ¥å‹åˆ¥æ”¯æ´</h3>
<p>yarn info axios types       # âœ… æœ‰å‹åˆ¥ =&gt; ä¸éœ€é¡å¤–å®‰è£
yarn info express types     # âŒ ç„¡å‹åˆ¥ =&gt; éœ€è¦ @types/express</p>
<h3 id="npm">æ–¹æ³•äºŒï¼šæŸ¥ npm é é¢èªªæ˜</h3>
<ul>
<li>
<p>æœå°‹é—œéµå­— typescript support æˆ– types</p>
</li>
<li>
<p>çœ‹æ˜¯å¦æåˆ°å‹åˆ¥å…§å»ºã€é‚„æ˜¯éœ€è¦å¦å¤–å®‰è£</p>
</li>
</ul>
<h2 id="_16">ğŸ§¾ å°æé†’</h2>
<ul>
<li>
<p>å‹åˆ¥å®šç¾©åªåœ¨ é–‹ç™¼éšæ®µä½¿ç”¨ï¼Œæ‰€ä»¥æ‡‰æ”¾åœ¨ devDependencies</p>
</li>
<li>
<p>å¦‚æœä½ éƒ¨ç½²å¾Œé‚„æœƒç”¨ ts-node ç›´æ¥åŸ·è¡Œ .ts æª”ï¼Œé€™æ™‚ @types/xxx å¯èƒ½éœ€è¦é€² dependencies</p>
</li>
</ul>
<h1 id="typescript-nodejs-port-app-vs-server">ğŸ§  TypeScript / Node.js é–‹ç™¼ç­†è¨˜ï¼šPort è¢«ä½”ç”¨ &amp; app vs server å·®ç•°</h1>
<h2 id="port">ğŸ”§ ä¸€ã€ç•¶ Port è¢«ä½”ç”¨æ™‚æ€éº¼è¾¦ï¼Ÿ</h2>
<h3 id="_17">âœ… å•é¡Œæè¿°ï¼š</h3>
<p>ç•¶ä½ å•Ÿå‹•ä¼ºæœå™¨æ™‚å‡ºç¾éŒ¯èª¤ï¼š</p>
<p>Error: listen EADDRINUSE: address already in use 127.0.0.1:3000</p>
<p>è¡¨ç¤º 3000 port å·²è¢«å…¶ä»–ç¨‹å¼ä½”ç”¨ã€‚</p>
<h3 id="_18">âœ… è§£æ³•æ­¥é©Ÿï¼š</h3>
<h3 id="1-port">1ï¸âƒ£ æŸ¥å‡ºæ˜¯èª°ä½”ç”¨äº†è©² port</h3>
<h3 id="windows">Windowsï¼š</h3>
<p>netstat -ano | findstr :3000</p>
<p>æœƒçœ‹åˆ°ä¸€è¡Œé¡ä¼¼é€™æ¨£çš„çµæœï¼Œæœ€å¾Œçš„æ•¸å­—æ˜¯ PIDï¼š</p>
<p>TCP    127.0.0.1:3000     0.0.0.0:0     LISTENING     12345</p>
<h3 id="macos-linux">macOS / Linuxï¼š</h3>
<p>lsof -i :3000</p>
<h3 id="2-pid">2ï¸âƒ£ çµ‚æ­¢è©²ç¨‹å¼ï¼ˆä½¿ç”¨ PIDï¼‰</h3>
<h3 id="windows_1">Windowsï¼š</h3>
<p>taskkill /PID 12345 /F</p>
<h3 id="macos-linux_1">macOS / Linuxï¼š</h3>
<p>kill -9 12345</p>
<h3 id="3-port">3ï¸âƒ£ æˆ–æ”¹ç”¨å…¶ä»– portï¼ˆé–‹ç™¼ä¸­å»ºè­°ï¼‰</h3>
<p>const PORT = process.env.PORT || 3001;
server.listen(PORT);</p>
<p>å•Ÿå‹•æ™‚æ”¹ç”¨ä¸åŒ portï¼š</p>
<p>PORT=3001 yarn dev</p>
<h2 id="express-app-server">ğŸš¦ äºŒã€Express ä¸­ app å’Œ server çš„å·®ç•°</h2>
<h3 id="app">âœ… app æ˜¯ä»€éº¼ï¼Ÿ</h3>
<ul>
<li>app = express();</li>
</ul>
    </article>
    <p class="post-meta">
      åŸæ–‡ï¼š
      <a href="https://github.com/Vincent23412/diary/blob/main/content/daily-notes/2025-06-05.md" target="_blank">GitHub</a> Â·
      <a href="https://raw.githubusercontent.com/Vincent23412/diary/main/content/daily-notes/2025-06-05.md" target="_blank">raw</a>
    </p>
  </main>

  <footer class="container py-24">
    <small>æœ€å¾Œæ›´æ–°ï¼š2026-01-10</small>
  </footer>
</body>
</html>
