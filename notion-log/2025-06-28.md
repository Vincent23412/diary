âœ… æ­£ç¢ºç­”æ¡ˆï¼šB. Use AWS Backup to create backup schedules and retention policies for the table.

âœ… é¡Œç›®è§£æï¼š

ç›®æ¨™ï¼š

- ä¿ç•™ ä½¿ç”¨è€…äº¤æ˜“è³‡æ–™ï¼ˆtransaction dataï¼‰ åœ¨ DynamoDB ä¸­

- ä¿å­˜æœŸé™ç‚º 7 å¹´

- è¿½æ±‚æœ€ä½ç‡Ÿé‹è² æ“”ï¼ˆMost operationally efficientï¼‰

ğŸ§  å„é¸é …åˆ†æï¼š

A. ä½¿ç”¨ DynamoDB çš„ Point-in-time recovery (PITR)

- PITR å¯ä»¥è®“ä½ å¾©åŸåˆ°æœ€è¿‘ 35 å¤©çš„ä»»æ„æ™‚é–“é»

- âœ… é©åˆçŸ­æœŸå¾©åŸç”¨

- âŒ ç„¡æ³•æ»¿è¶³ 7 å¹´ä¿å­˜éœ€æ±‚

âœ… B. ä½¿ç”¨ AWS Backup è¨­å®šå‚™ä»½æ’ç¨‹èˆ‡ä¿ç•™åŸå‰‡

- æ”¯æ´ DynamoDB table çš„å®šæœŸå‚™ä»½èˆ‡è‡ªè¨‚ä¿ç•™æœŸ

- å¯ä»¥è¨­å®šæ¯å¤©/æ¯é€±/æ¯æœˆå‚™ä»½ä¸¦è‡ªå‹•ä¿å­˜ 7 å¹´ âœ…

- å®Œå…¨ ç„¡éœ€è‡ªè¨‚ Lambda æˆ– EventBridge âœ…

- æœ€ç¬¦åˆ operationally efficient çš„æ¢ä»¶

C. ä½¿ç”¨ DynamoDB Console æ‰‹å‹•å‚™ä»½ + S3 å„²å­˜

- éœ€è¦æ‰‹å‹•æ“ä½œï¼Œç„¡æ³• scale

- é›–ç„¶æ­é… S3 Lifecycle å¯é” 7 å¹´ä¿ç•™

- âŒ ä¸æ˜¯ã€Œè‡ªå‹•åŒ–ã€æˆ–ã€Œé«˜æ•ˆç‡ã€çš„ç‡Ÿé‹æ–¹å¼

D. ä½¿ç”¨ EventBridge + Lambda è‡ªå‹•å‚™ä»½åˆ° S3

- å¯ä»¥é”æˆéœ€æ±‚ï¼Œä½†è¦ä½ è‡ªå·±ç¶­è­·ï¼š

- é›–ç„¶æœ‰æ•ˆï¼Œä½†æ¯”èµ· AWS Backup ä»å¤šå‡ºä¸å°‘ç¶­é‹è² æ“” âŒ

âœ… ç¸½çµæ¯”è¼ƒï¼š

âœ… æ­£è§£ï¼š

B. Use AWS Backup to create backup schedules and retention policies for the table.

âœ… æ­£ç¢ºç­”æ¡ˆï¼šB. Modify the launchPermission property of the AMI. Share the AMI with the MSP Partnerâ€™s AWS account only. Modify the CMKâ€™s key policy to allow the MSP Partnerâ€™s AWS account to use the key.

ğŸ§  é¡Œç›®è§£æï¼š

é€™é¡Œçš„é‡é»åœ¨æ–¼ï¼š

AMI æ˜¯åŠ å¯†çš„ï¼Œè€Œä¸”ï¼š

ä½¿ç”¨çš„æ˜¯ è‡ªå®šç¾©çš„ KMS CMKï¼ˆCustomer Master Keyï¼‰

éœ€è¦èˆ‡ MSP Partner çš„ AWS å¸³æˆ¶å…±äº«

å¼·èª¿è¦ æœ€å®‰å…¨çš„æ–¹å¼

âœ… ç‚ºä»€éº¼é¸ Bï¼Ÿ

- launchPermission å¯ç”¨ä¾†æŒ‡å®šå“ªäº›å¸³è™Ÿå¯ä½¿ç”¨ AMI å•Ÿå‹• EC2ã€‚

- ä½†å› ç‚ºè©² AMI èƒŒå¾Œçš„ EBS Snapshot æ˜¯ ä½¿ç”¨ CMK åŠ å¯†çš„ï¼š

- 

- é€™æ˜¯ AWS å®˜æ–¹å»ºè­°çš„åšæ³•ï¼Œå®‰å…¨åˆç›´æ¥ã€‚

âŒ å…¶ä»–é¸é …ç‚ºä½•éŒ¯ï¼Ÿ

A.

å…¬é–‹ AMI å’Œ snapshotï¼Ÿ

- âŒ é¢¨éšªæ¥µé«˜ï¼ä¸è©²å°‡åŠ å¯†è³‡æºå…¬é–‹ï¼Œå³ä½¿æœ‰é‡‘é‘°ä¿è­·ã€‚

- ä¸ç¬¦åˆã€Œæœ€å®‰å…¨æ–¹å¼ã€é€™å€‹é¡Œç›®é‡é»ã€‚

C.

ä¿¡ä»»å°æ–¹çš„ KMS é‡‘é‘°ï¼Ÿ

- âŒ KMS é‡‘é‘°ä¸æ”¯æ´ã€Œä¿¡ä»»å¦ä¸€å€‹é‡‘é‘°ã€çš„è¨­å®šã€‚

- ä½ ä¸èƒ½ç”¨ CMK ç›´æ¥ä¿¡ä»»å¦ä¸€å€‹å¸³è™Ÿçš„é‡‘é‘°ä¾†é‡åŠ å¯†å·²å­˜åœ¨çš„ snapshotã€‚

- è€Œä¸”è¤‡é›œã€æ˜“éŒ¯ï¼Œä¸æ˜¯æœ€ç›´æ¥æˆ–å®‰å…¨çš„é¸é …ã€‚

D.

é€é S3 åŒ¯å‡ºå†é‡å»ºï¼Ÿ

- é€™æ˜¯å¯è¡Œçš„æŠ€è¡“æ–¹å¼ï¼Œä½†ï¼š

- 

- é¡Œç›®èªªæ˜ï¼šã€Œæœ€å®‰å…¨ï¼Œæœ€ä½é¢¨éšªæ–¹å¼ã€â†’ âŒ ä¸ç¬¦åˆã€‚

âœ… æ­£è§£æ–¹å¼èªªæ˜ï¼š

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¨­å®šå…±äº« AMIï¼š

aws ec2 modify-image-attribute \

--image-id ami-xxxxxxxx \

--launch-permission "Add=[{UserId=MSP_ACCOUNT_ID}]"

ç„¶å¾Œæ›´æ–°åŠ å¯† snapshot æ‰€ä½¿ç”¨çš„ KMS CMK é‡‘é‘°ç­–ç•¥ï¼ŒåŠ å…¥ MSP å¸³è™Ÿï¼š

{

"Sid": "Allow use of the key",

"Effect": "Allow",

"Principal": { "AWS": "arn:aws:iam::MSP_ACCOUNT_ID:root" },

"Action": [

"kms:Decrypt",

"kms:DescribeKey",

"kms:ReEncrypt*",

"kms:GenerateDataKey*"

],

"Resource": "*"

}

âœ… ç¸½çµ

âœ… æ­£è§£ï¼š

B. Modify the launchPermission property of the AMI. Share the AMI with the MSP Partnerâ€™s AWS account only. Modify the CMKâ€™s key policy to allow the MSP Partnerâ€™s AWS account to use the key.

âœ… æ­£ç¢ºç­”æ¡ˆï¼šD. Create an Amazon EventBridge (Amazon CloudWatch Events) rule to detect any certificates that will expire within 30 days. Configure the rule to invoke an AWS Lambda function. Configure the Lambda function to send a custom alert by way of Amazon Simple Notification Service (Amazon SNS).

ğŸ” é¡Œç›®è§£æï¼š

ç›®æ¨™ï¼š

åœ¨ SSL/TLS æ†‘è­‰éæœŸå‰ 30 å¤©ç™¼å‡ºé€šçŸ¥ã€‚

æƒ…å¢ƒï¼š

- æ†‘è­‰æ˜¯å¾ ACM (AWS Certificate Manager) åŒ¯å…¥çš„ã€‚

- ç”¨æ–¼ Elastic Load Balancersã€‚

- éœ€è¦ è‡ªå‹•é€šçŸ¥ï¼ˆ30å¤©å‰ï¼‰ â†’ ç¬¦åˆ event-driven alerting æ¦‚å¿µã€‚

âœ… ç‚ºä»€éº¼é¸ Dï¼Ÿ

AWS Certificate Manager æœ¬èº«ç„¡æ³•è‡ªå‹•é€šçŸ¥æ†‘è­‰å³å°‡éæœŸï¼Œä½†å®ƒæœƒå°‡é€™äº›è³‡è¨Šç™¼ä½ˆåˆ° Amazon EventBridgeï¼ˆä»¥å‰å« CloudWatch Eventsï¼‰ã€‚

ä½ å¯ä»¥ï¼š

å»ºç«‹ä¸€å€‹ EventBridge è¦å‰‡ä¾†ç¯©é¸å‡º ACM æ†‘è­‰éæœŸçš„äº‹ä»¶ï¼ˆACM Certificate Approaching Expirationï¼‰ã€‚

è§¸ç™¼ AWS Lambdaã€‚

Lambda ç™¼é€é€šçŸ¥åˆ° SNS topicã€‚

é€™æ¨£å¯ä»¥æ»¿è¶³ï¼š

- â° 30å¤©å‰é€šçŸ¥

- ğŸ“© è‡ªå‹•é€šçŸ¥ via SNS

- ğŸ” ç„¡éœ€æ‰‹å‹•ç›£æ§

âŒ éŒ¯èª¤é¸é …è§£æï¼š

A. âŒã€ŒAdd a rule in ACMã€

ACM ä¸æ”¯æ´è‡ªè¨‚è¦å‰‡æˆ–æ’ç¨‹é€šçŸ¥ï¼Œä¹Ÿä¸èƒ½ç›´æ¥ publish SNS é€šçŸ¥ã€‚