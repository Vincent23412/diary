<!doctype html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>2025-07-26</title>
  <link rel="stylesheet" href="/notes/style.css" />
</head>
<body>
  <header class="container py-24">
    <h1 class="title">2025-07-26</h1>
    <nav class="nav">
      <a href="/notes/daily-notes/index.html" class="nav-link">â† å›åˆ†é¡</a>
      <a href="/notes/index.html" class="nav-link">å›ç¸½è¦½</a>
    </nav>
  </header>

  <main class="container card">
    <article class="post-content">
      <p>ä½ ç­”å°äº† âœ…</p>
<p>é¡Œç›®é‡é»ï¼š</p>
<p>ä½ éœ€è¦æå‡ Amazon ElastiCache for Redis çš„å®‰å…¨æ€§ï¼Œè®“ä½¿ç”¨è€…åœ¨åŸ·è¡Œ Redis æŒ‡ä»¤å‰è¼¸å…¥å¯†ç¢¼ã€‚</p>
<p>æ­£ç¢ºç­”æ¡ˆè§£é‡‹ï¼š</p>
<p>Authenticate the users using Redis AUTH by creating a new Redis Cluster with both the â€“transit-encryption-enabled and â€“auth-token parameters enabled.</p>
<p>é€™å€‹è¨­å®šåŒ…å«å…©å€‹é‡é»å®‰å…¨æªæ–½ï¼š</p>
<p>Redis AUTH (--auth-token)ï¼šå¼·åˆ¶ä½¿ç”¨è€…åœ¨é€£ç·šæ™‚è¼¸å…¥å¯†ç¢¼ã€‚æ²’æœ‰å¯†ç¢¼å°‡ç„¡æ³•åŸ·è¡Œä»»ä½• Redis å‘½ä»¤ã€‚</p>
<p>In-transit encryption (--transit-encryption-enabled)ï¼šåŠ å¯†è³‡æ–™åœ¨ç”¨æˆ¶èˆ‡ Redis ä¹‹é–“çš„å‚³è¼¸ï¼Œé˜²æ­¢ä¸­é–“äººæ”»æ“Šæˆ–å°åŒ…ç«Šè½ã€‚</p>
<p>éŒ¯èª¤é¸é …è§£æï¼š</p>
<ul>
<li>
<p>Enable the in-transit encryption for Redis replication groups</p>
</li>
<li></li>
<li>
<p>Create a new Redis replication group and set the AtRestEncryptionEnabled parameter to true</p>
</li>
<li></li>
<li>
<p>Do nothing. This feature is already enabled by default</p>
</li>
<li></li>
<li>
<p>None of the above</p>
</li>
<li></li>
</ul>
<p>è£œå……çŸ¥è­˜é»ï¼š</p>
<p>å¦‚æœä½ è¦è¨­å®š auth-tokenï¼Œä½ å¯ä»¥é€™æ¨£åšï¼ˆä¾‹å¦‚ä½¿ç”¨ AWS CLIï¼‰ï¼š</p>
<p>aws elasticache create-replication-group \</p>
<p>--replication-group-id my-secure-group \</p>
<p>--replication-group-description "Secure Redis" \</p>
<p>--engine redis \</p>
<p>--auth-token "YourSecurePassword" \</p>
<p>--transit-encryption-enabled \</p>
<p>...</p>
<p>å¦‚æœä½ é‚„æƒ³äº†è§£ Redis çš„åŠ å¯†ã€æˆæ¬Šèˆ‡å¤šå±¤é˜²è­·ï¼Œå¯ä»¥å‘Šè¨´æˆ‘ï¼Œæˆ‘å¯ä»¥å¹«ä½ è£œå……æ›´å¤š ElastiCache å®‰å…¨æœ€ä½³å¯¦è¸ã€‚</p>
<p>ç•¶ç„¶å¯ä»¥ï¼Œä»¥ä¸‹æ˜¯é€™é¡Œçš„é¡Œç›®è§£é‡‹å’Œè©³è§£å…©å€‹éƒ¨åˆ†ï¼š</p>
<p>ğŸ§© é¡Œç›®è§£é‡‹ï¼š</p>
<p>é€™é¡Œæƒ…å¢ƒæ˜¯ï¼š</p>
<ul>
<li>
<p>ä½ æœ‰ä¸€å€‹éƒ¨ç½²åœ¨ Auto Scaling ç¾¤çµ„ä¸­çš„ EC2 Web æ‡‰ç”¨ç¨‹å¼ã€‚</p>
</li>
<li>
<p>æ‡‰ç”¨ç¨‹å¼ä½¿ç”¨çš„æ˜¯ Amazon RDS ä¸Šçš„ Microsoft SQL Server è³‡æ–™åº«ã€‚</p>
</li>
<li>
<p>ç¾åœ¨æœ‰ä¸€å€‹å®‰å…¨æ€§éœ€æ±‚ï¼šå¿…é ˆåŠ å¯†å¾ Web æ‡‰ç”¨ç¨‹å¼å‚³è¼¸åˆ° RDS çš„è³‡æ–™ï¼ˆin-flight dataï¼‰ã€‚</p>
</li>
</ul>
<p>â¡ï¸ æ‰€ä»¥ä½ éœ€è¦æ‰¾å‡ºæœ€é©åˆçš„å…©å€‹æ–¹å¼ï¼Œä¾†ç¢ºä¿ EC2 èˆ‡ RDS ä¹‹é–“å‚³è¼¸ä¸­çš„è³‡æ–™æ˜¯å®‰å…¨ã€åŠ å¯†çš„ã€‚</p>
<p>âœ… è©³è§£ï¼š</p>
<p>æ­£ç¢ºç­”æ¡ˆï¼ˆå…©å€‹ï¼‰ï¼š</p>
<p>âœ… 1.</p>
<p>Download the Amazon RDS Root CA certificate. Import the certificate to your servers and configure your application to use SSL to encrypt the connection to RDS.</p>
<ul>
<li>
<p>ğŸ“Œ æ„æ€æ˜¯ä½ å¿…é ˆè®“æ‡‰ç”¨ç«¯ï¼ˆEC2 ä¸Šçš„ç¨‹å¼ï¼‰ä¸»å‹•å»ºç«‹åŠ å¯†çš„ SSL é€£ç·šåˆ° RDSã€‚</p>
</li>
<li>
<p>RDS é è¨­æœƒæä¾›ä¸€å€‹æ†‘è­‰ï¼Œä½ å¿…é ˆä¸‹è¼‰ã€å®‰è£é€™å€‹æ†‘è­‰ï¼Œä¸¦ä¿®æ”¹ä½ çš„é€£ç·šè¨­å®šä¾†ä½¿ç”¨ SSLã€‚</p>
</li>
<li>
<p>âœ… é€™æ¨£å¯ä»¥ä¿è­‰ã€Œå‚³è¼¸éç¨‹ä¸­çš„è³‡æ–™æ˜¯åŠ å¯†çš„ã€ã€‚</p>
</li>
</ul>
<p>âœ… 2.</p>
<p>Force all connections to your DB instance to use SSL by setting the rds.force_ssl parameter to true. Once done, reboot your DB instance.</p>
<ul>
<li>
<p>ğŸ“Œ é€™å€‹æ–¹æ³•æ˜¯åœ¨ RDS çš„å±¤ç´šã€Œå¼·åˆ¶æ‰€æœ‰é€²ä¾†çš„é€£ç·šéƒ½ä½¿ç”¨ SSLã€ï¼Œå¦å‰‡ä¸æ¥å—é€£ç·šã€‚</p>
</li>
<li>
<p>é€™æ¨£å³ä½¿æŸå€‹æ‡‰ç”¨ç¨‹å¼å¿˜è¨˜è¨­å®š SSLï¼Œä¹Ÿä¸æœƒæœ‰æœªåŠ å¯†çš„é€£ç·šé€²ä¾†ã€‚</p>
</li>
<li>
<p>âš ï¸ é€™æ˜¯ä¸€å€‹ static åƒæ•¸ï¼Œè¦é‡å•Ÿ RDS æ‰æœƒç”Ÿæ•ˆã€‚</p>
</li>
</ul>
<p>âŒ éŒ¯èª¤é¸é …ï¼š</p>
<p>âœ˜ Enable the IAM DB authentication in RDS using the AWS Management Console.</p>
<ul>
<li>
<p>IAM DB Auth åªé©ç”¨æ–¼ MySQL/PostgreSQLï¼Œä¸æ˜¯ SQL Serverã€‚</p>
</li>
<li>
<p>å®ƒæ˜¯åšã€Œèº«ä»½é©—è­‰ã€ï¼Œä¸åŠ å¯†è³‡æ–™å‚³è¼¸ã€‚</p>
</li>
</ul>
<p>âœ˜ Configure the security groups of your EC2 instances and RDS to only allow traffic to and from port 443.</p>
<ul>
<li>
<p>SQL Server é€šå¸¸ä½¿ç”¨çš„æ˜¯ port 1433ã€‚</p>
</li>
<li>
<p>å³ä½¿ä½ æ”¹æˆ 443ï¼Œå®‰å…¨ç¾¤çµ„åªèƒ½é™åˆ¶é€šè¨Šå°è±¡ï¼Œç„¡æ³•å¯¦éš›åŠ å¯†è³‡æ–™å…§å®¹ã€‚</p>
</li>
</ul>
<p>âœ˜ Specify the TDE option in an RDS option group to enable Transparent Data Encryption (TDE).</p>
<ul>
<li>
<p>TDE æ˜¯åŠ å¯†ã€Œå„²å­˜åœ¨ç£ç¢Ÿä¸Šçš„è³‡æ–™ï¼ˆAt-Restï¼‰ã€ã€‚</p>
</li>
<li>
<p>é¡Œç›®è¦æ±‚çš„æ˜¯ in-flightï¼ˆå‚³è¼¸ä¸­çš„ï¼‰åŠ å¯†ï¼Œé€™å…©è€…ä¸åŒã€‚</p>
</li>
</ul>
<p>å¦‚æœä½ é‚„ä¸ç†Ÿ rds.force_ssl æ€éº¼è¨­å®šã€æˆ–å¦‚ä½•åœ¨æ‡‰ç”¨ç¨‹å¼å±¤é¢å•Ÿç”¨ SQL Server SSLï¼Œéš¨æ™‚å¯ä»¥å•æˆ‘ï¼Œæˆ‘å¯ä»¥æä¾›å…·é«”çš„æ“ä½œæ–¹å¼æˆ–ç¨‹å¼ç¢¼ç¯„ä¾‹ã€‚</p>
<p>é€™é¡Œæˆ‘å€‘å…ˆä¾†çœ‹é¡Œç›®èƒŒæ™¯ï¼Œå†é€²å…¥è©³è§£ï¼š</p>
<p>ğŸ§© é¡Œç›®è§£é‡‹ï¼š</p>
<p>ä½ è² è²¬çš„å°ˆæ¡ˆæ˜¯è®“ä¸€å®¶åŠ å¯†è²¨å¹£å…¬å¸çš„åœ‹éš›åŒ¯æ¬¾æ‡‰ç”¨ç¨‹å¼èµ°å‘å…¨çƒã€‚</p>
<p>ä½ çš„ç›®æ¨™æ˜¯ç¢ºä¿æ‡‰ç”¨ç¨‹å¼çš„è³‡æ–™åº«åœ¨å¤šå€‹å€åŸŸï¼ˆregionï¼‰ä¸­ä¿æŒé«˜åº¦å¯ç”¨æ€§ï¼ˆHigh Availabilityï¼‰ã€‚</p>
<p>é¡Œç›®å•çš„æ˜¯ï¼šä½¿ç”¨ Amazon RDS çš„ Multi-AZ éƒ¨ç½² æœ‰å“ªäº›å¥½è™•ï¼Ÿï¼ˆé¸å…©å€‹ï¼‰</p>
<p>âœ… æ­£ç¢ºç­”æ¡ˆè©³è§£ï¼š</p>
<p>âœ… 1.</p>
<p>Provides enhanced database durability in the event of a DB instance component failure or an Availability Zone outage.</p>
<ul>
<li>
<p>ğŸ“Œ Multi-AZ éƒ¨ç½²æœƒåœ¨å¦ä¸€å€‹å¯ç”¨å€ï¼ˆAZï¼‰å»ºç«‹ä¸€å€‹åŒæ­¥è¤‡å¯«çš„ standby è³‡æ–™åº«ã€‚</p>
</li>
<li>
<p>ä¸€æ—¦ä¸»è³‡æ–™åº«ç™¼ç”Ÿç¡¬é«”æ•…éšœæˆ–è©² AZ å®•æ©Ÿï¼Œæœƒè‡ªå‹• failover åˆ° standbyï¼Œä¸éœ€äººå·¥å¹²é ã€‚</p>
</li>
<li>
<p>âœ… å› æ­¤ï¼Œå¤§å¹…æå‡å®¹éŒ¯æ€§èˆ‡è³‡æ–™è€ä¹…æ€§ï¼ˆdurabilityï¼‰ã€‚</p>
</li>
</ul>
<p>âœ… 2.</p>
<p>Increased database availability in the case of system upgrades like OS patching or DB Instance scaling.</p>
<ul>
<li>
<p>ğŸ“Œ åœ¨éœ€è¦é€²è¡Œç³»çµ±å‡ç´šï¼ˆå¦‚ä½œæ¥­ç³»çµ±æ›´æ–°æˆ– DB è¦æ¨¡æ“´å±•ï¼‰æ™‚ï¼Œ</p>
</li>
<li></li>
<li>
<p>âœ… é€™ç¨®æ–¹å¼æå‡äº†å¯ç”¨æ€§ï¼ˆavailabilityï¼‰ï¼Œç‰¹åˆ¥é©åˆç”Ÿç”¢ç’°å¢ƒã€‚</p>
</li>
</ul>
<p>âŒ éŒ¯èª¤é¸é …è§£æï¼š</p>
<p>âœ˜</p>
<p>Creates a primary DB Instance and synchronously replicates the data to a standby instance in a different AZ in a different region.</p>
<ul>
<li>
<p>âŒ éŒ¯åœ¨ã€Œdifferent regionï¼ˆä¸åŒå€åŸŸï¼‰ã€é€™å¥ã€‚</p>
</li>
<li>
<p>âœ… Multi-AZ æ˜¯è·¨å¯ç”¨å€ï¼ˆAZï¼‰ï¼Œä½†éƒ½æ˜¯<strong>åœ¨åŒä¸€å€‹å€åŸŸï¼ˆregionï¼‰</strong>è£¡ã€‚</p>
</li>
</ul>
<p>âœ˜</p>
<p>Significantly increases the database performance.</p>
<ul>
<li>
<p>âŒ standby è³‡æ–™åº«ä¸æä¾›è®€å–æœå‹™ï¼ˆé™¤éä½¿ç”¨ Aurora Multi-AZï¼‰ï¼Œæ‰€ä»¥ä¸æå‡æ•ˆèƒ½ã€‚</p>
</li>
<li>
<p>âœ… å®ƒçš„ç›®çš„æ˜¯å¯ç”¨æ€§ä¸æ˜¯æ€§èƒ½ã€‚</p>
</li>
</ul>
<p>âœ˜</p>
<p>Provides SQL optimization.</p>
<ul>
<li>
<p>âŒ èˆ‡ SQL å„ªåŒ–ç„¡é—œã€‚</p>
</li>
<li>
<p>Multi-AZ ä¸æœƒæ”¹è®ŠæŸ¥è©¢èªæ³•æˆ–åŸ·è¡Œè¨ˆåŠƒï¼Œåªå½±éŸ¿åº•å±¤å¯ç”¨æ€§ã€‚</p>
</li>
</ul>
<p>ğŸ§  è£œå……å»ºè­°ï¼š</p>
<p>å¦‚æœä½ çš„ç›®æ¨™æ˜¯å¯¦ç¾è·¨å€åŸŸï¼ˆregionï¼‰é«˜å¯ç”¨æ€§èˆ‡å…¨çƒå­˜å–ï¼Œé‚£å°±æ‡‰è©²è€ƒæ…®ï¼š</p>
<ul>
<li>
<p>âœ… Amazon Aurora Global Databaseï¼šæ”¯æ´ä¸€å€‹ä¸»å€åŸŸ + å¤šå€‹åªè®€å€åŸŸï¼Œé©åˆå…¨çƒæ‡‰ç”¨ã€‚</p>
</li>
<li>
<p>âœ… æˆ–æ­é… è·¨å€åŸŸ read replicaï¼ˆé©ç”¨æ–¼ MySQLã€PostgreSQLï¼‰ã€‚</p>
</li>
</ul>
<p>å¦‚æœä½ æƒ³ï¼Œæˆ‘å¯ä»¥å¹«ä½ æ¯”è¼ƒ Multi-AZ èˆ‡ Aurora Global Database çš„å·®ç•°ã€‚</p>
<p>é€™æ˜¯ä¸€å€‹éå¸¸å¯¦ç”¨ä¹Ÿå¸¸è¢«æ··æ·†çš„å•é¡Œã€‚</p>
<p>ä½ å•çš„æ˜¯ï¼š</p>
<p>IAM Database Authentication èˆ‡ä½¿ç”¨ Root Certificate (SSL) çš„å·®åˆ¥æ˜¯ä»€éº¼ï¼Ÿ</p>
    </article>
    <p class="post-meta">
      åŸæ–‡ï¼š
      <a href="https://github.com/Vincent23412/diary/blob/main/content/daily-notes/2025-07-26.md" target="_blank">GitHub</a> Â·
      <a href="https://raw.githubusercontent.com/Vincent23412/diary/main/content/daily-notes/2025-07-26.md" target="_blank">raw</a>
    </p>
  </main>

  <footer class="container py-24">
    <small>æœ€å¾Œæ›´æ–°ï¼š2025-11-03</small>
  </footer>
</body>
</html>
