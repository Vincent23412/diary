<!doctype html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>2025-06-26</title>
  <link rel="stylesheet" href="/notes/style.css" />
</head>
<body>
  <header class="container py-24">
    <h1 class="title">2025-06-26</h1>
    <nav class="nav">
      <a href="/notes/daily-notes/index.html" class="nav-link">← 回分類</a>
      <a href="/notes/index.html" class="nav-link">回總覽</a>
    </nav>
  </header>

  <main class="container card">
    <article class="post-content">
      <p>✅ 題目重點：</p>
<ul>
<li>
<p>公司 EC2 成本上升</p>
</li>
<li>
<p>發現有幾台 EC2 出現 不必要的垂直擴展（vertical scaling）</p>
</li>
<li>
<p>需求：</p>
</li>
<li></li>
</ul>
<p>✅ 各選項解析：</p>
<p>A. Use AWS Budgets</p>
<ul>
<li>
<p>❌ AWS Budgets 是用來設定預算與通知，不提供深入歷史分析或按 Instance Type 的視覺化工具</p>
</li>
<li>
<p>不適合用來「追查成本異常」</p>
</li>
</ul>
<p>B. ✅ Use Cost Explorer’s granular filtering feature to perform an in-depth analysis of EC2 costs based on instance types</p>
<ul>
<li>
<p>✅ Cost Explorer 支援按 EC2 服務 → instance type → month/day 維度分析</p>
</li>
<li>
<p>✅ 內建圖表功能，可視覺化近 2 個月成本變化</p>
</li>
<li>
<p>✅ 操作簡單，不需額外設定或寫程式</p>
</li>
<li>
<p>✅ 最低操作負擔的選項</p>
</li>
</ul>
<p>C. Use AWS Billing and Cost Management dashboard</p>
<ul>
<li>
<p>❌ 此功能提供的是整體成本摘要</p>
</li>
<li>
<p>雖有圖表，但過於粗略，不支援深入 drill down 到 instance type 層級</p>
</li>
<li>
<p>✘ 不足以找出根因（root cause）</p>
</li>
</ul>
<p>D. Use Cost and Usage Reports (CUR) + S3 + QuickSight</p>
<ul>
<li>
<p>✅ 能做到非常深入的自定義分析</p>
</li>
<li>
<p>❌ 需要設定：</p>
</li>
<li></li>
<li>
<p>操作負擔高，不符合「最小操作負擔」的要求</p>
</li>
</ul>
<p>✅ 正確答案：</p>
<p>B. Use Cost Explorer’s granular filtering feature to perform an in-depth analysis of EC2 costs based on instance types</p>
<p>📌 補充：Cost Explorer 可進行的分析維度</p>
<ul>
<li>
<p>Service（Amazon EC2）</p>
</li>
<li>
<p>Instance Type（如 t3.large, m5.xlarge）</p>
</li>
<li>
<p>Linked Account</p>
</li>
<li>
<p>Usage Type（按小時計費）</p>
</li>
<li>
<p>Time (monthly, daily)</p>
</li>
<li>
<p>Region</p>
</li>
</ul>
<p>AWS 成本相關服務總整理</p>
<p>🎯 建議用途地圖</p>
<p>✅ A. Turn on AWS Config with the appropriate rules.</p>
<p>✅ 為什麼選 A：AWS Config + 規則</p>
<ul>
<li>
<p>AWS Config 可以持續追蹤資源的設定變更，並記錄歷史狀態。</p>
</li>
<li>
<p>對於 Amazon S3，你可以設定以下 Config 規則，例如：</p>
</li>
<li></li>
</ul>
<p>🔍 用途：當 S3 bucket 的設定被未經授權的變更（如開放 public read、關閉加密），Config 會偵測並標示為「non-compliant」，可搭配 SNS、EventBridge 發警告。</p>
<p>❌ B. AWS Trusted Advisor</p>
<ul>
<li>
<p>Trusted Advisor 是用來檢查常見的設定最佳化（如安全性、成本、可用性等）。</p>
</li>
<li>
<p>不會持續監控設定變化，而且很多安全檢查僅開放給 Business/Enterprise 支援等級帳戶。</p>
</li>
<li>
<p>不適合用來審查持續變動的資源配置變更</p>
</li>
</ul>
<p>❌ C. Amazon Inspector</p>
<ul>
<li>
<p>Inspector 是做 漏洞掃描與安全評估，主要針對：</p>
</li>
<li></li>
<li>
<p>與 S3 設定無關</p>
</li>
</ul>
<p>❌ D. S3 Server Access Logging + EventBridge</p>
<ul>
<li>
<p>Access Logging 是記錄誰「存取 S3 物件」，不是「修改設定」</p>
</li>
<li>
<p>EventBridge 無法直接觸發設定變更事件（Config 才能追蹤設定歷史）</p>
</li>
</ul>
<p>✅ 結論</p>
<p>🔍 AWS 設定與安全審查類型服務一覽</p>
<p>🧩 實際應用場景舉例</p>
<p>✅ S3 Bucket 安全監控與合規</p>
<ul>
<li>
<p>使用 AWS Config：</p>
</li>
<li></li>
</ul>
<p>✅ 檢查是否有安全風險資源</p>
<ul>
<li>
<p>使用 Trusted Advisor (免費項目)：</p>
</li>
<li></li>
</ul>
<p>✅ 檢查 EC2 是否存在漏洞</p>
<ul>
<li>
<p>使用 Amazon Inspector：</p>
</li>
<li></li>
</ul>
<p>✅ 自動修正策略（Auto Remediation）</p>
<ul>
<li>
<p>組合：AWS Config + Systems Manager Automation</p>
</li>
<li></li>
</ul>
<p>✅ 哪些服務免費？</p>
<p>❓ 題目重述與需求解析</p>
<p>A company is migrating applications to AWS. The applications are deployed in different accounts. The company manages the accounts centrally by using AWS Organizations. The company’s security team needs a single sign-on (SSO) solution across all the company’s accounts. The company must continue managing the users and groups in its on-premises self-managed Microsoft Active Directory.</p>
<p>✅ 題目要點拆解：</p>
<p>多個 AWS 帳號（Accounts）：表示未來登入操作需支援跨帳號。</p>
<p>使用 AWS Organizations 管理：代表帳號已統一控管，可以與 SSO 整合。</p>
<p>希望有 SSO（Single Sign-On）解決方案：即一個登入入口可以操作多個帳號。</p>
<p>使用者與群組維持在本地的 Microsoft Active Directory（on-prem AD）管理：身份來源（identity source）不在 AWS，需要整合。</p>
<p>🎯 關鍵需求總結：</p>
<ul>
<li>
<p>要跨帳號 SSO</p>
</li>
<li>
<p>要與 AWS 原生整合（因為已用 Organizations）</p>
</li>
<li>
<p>要沿用現有的本地 AD 身份系統</p>
</li>
<li>
<p>要選擇維運負擔最小的方式</p>
</li>
</ul>
<p>✅ 正確答案：</p>
<p>A. Enable AWS Single Sign-On (AWS SSO) from the AWS SSO console. Create a one-way forest trust or a one-way domain trust to connect the company’s self-managed Microsoft Active Directory with AWS SSO by using AWS Directory Service for Microsoft Active Directory.</p>
<p>🔍 為什麼選 A？</p>
<ul>
<li>
<p>AWS SSO（現在叫 AWS IAM Identity Center） 是提供跨帳號單一登入的最佳原生工具。</p>
</li>
<li>
<p>要從本地 Active Directory 同步身份資訊進 AWS，需要透過：</p>
</li>
<li></li>
<li>
<p>一旦信任建立，AWS SSO 就可以讀取 on-prem AD 的使用者和群組，並授予他們跨帳號的訪問權限。</p>
</li>
</ul>
<p>❌ 其他選項錯誤解析：</p>
    </article>
    <p class="post-meta">
      原文：
      <a href="https://github.com/Vincent23412/diary/blob/main/content/daily-notes/2025-06-26.md" target="_blank">GitHub</a> ·
      <a href="https://raw.githubusercontent.com/Vincent23412/diary/main/content/daily-notes/2025-06-26.md" target="_blank">raw</a>
    </p>
  </main>

  <footer class="container py-24">
    <small>最後更新：2025-10-28</small>
  </footer>
</body>
</html>
